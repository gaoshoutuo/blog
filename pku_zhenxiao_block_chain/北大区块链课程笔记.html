<html lang="en">
    <head>

        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=0.5">

        <link href="http://www.yinwang.org/main.css" rel="stylesheet" type="text/css">
        <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Atom feed">
        <link rel="shortcut icon" href="http://www.yinwang.org/images/Yc.jpg">

        <title>自律</title>

        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                                    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
            ga('create', 'UA-45586344-1', 'yinwang.org');
            ga('send', 'pageview');
        </script>
    </head>

    <body>
        <script>
            if (/mobile/i.test(navigator.userAgent) || /android/i.test(navigator.userAgent))
            {
               document.body.classList.add('mobile');
            }
        </script>

        <!--
        <div class="ad-banner" style="margin-bottom: 5px">
            <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
            <ins class="adsbygoogle"
                    style="display:inline-block;width:100%;height:90px"
                    data-ad-client="ca-pub-1331524016319584"
                    data-ad-slot="6657867155"></ins>
            <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
        </div>
        -->

        <div class="inner">
            <h2>北大区块链课程的笔记</h2>
           <p> 2020.11.11     做事情就应该要义无反顾的。大城市的人的特质比小城市可厉害太多了。</p>
            <p>2.比特币中的密码学
            <span>密码学有两条性质 哈希与签名，其中哈希的两条性质哈希膨胀 与 hidding  比特币中要多一条性质那就是puzzle friendly。
            先解释 哈希膨胀  对于x H(X)就是他的哈希值，密码学中也称digest 摘要。对于要求的X空间，存在有2^x
                个哈希值的取值范围，其中可能存在x!=y 但是HX=HY的情况这就是我们所说的哈希碰撞，此外我们还要就
                X的取值范围要比较连续平滑，HX也是，不能集中在某一些范围。x的取值空间要足够的大，用来防止以遍历
                的手段撞上同一个hash 然后得到x。为了得到一个比较正规的X范围 在比特币中。通常是 H_HEADER+NONCE.也就是
                X后跟一个随机数来保证X'的符合标准。第二层hidding的意思就是在HX的值可以公布，但是X的值不去公布，很难通过
                HX的值去计算X。MD5就是一种被我国王小云教授破解的失败的HASH函数。而比特币所要求的puzzle friendly 就是
                对于挖矿 HX要在某一个范围 例如在HX 在256位 前顶K位数的0的hash范围，挖矿就是在求这个nonce，但是nonce总是
                随机的，如今并没有好的办法去找到好的nonce直接破解难度，唯一就是硬用算力去算，谁算力大，谁越可能找到nonce，然后
                找到区块链获得铸币权。这也叫做工作量证明。比特币中使用sha-256hash算法，sercure hash algorithm
            </span>
                <span>比特币中的签名性质，每个人都有地址，需要用公钥私钥这对密钥，非对称加密体系弄得。对称加密是加密解密
                    用的都是同一把钥匙，密钥需要传输，密钥丢失就麻烦了。所以需要有一对密钥。也就是公钥传送给其他接受方，而
                    私钥自己保存，公钥用来加密信息，私钥用来解密信息。另外摘要为了防止篡改，需要自己的私钥用来生成摘要签名，
                    公钥验证签名，是否是本人，。

                    假如两个人生成的公私钥生成 相等一个人把另一个人账户的钱取走。这种情况存在但是几乎不可能，还是看密钥对生成算法
                    的。imtoken杭州就不知道被套话了还是怎么的，有一个人声称，自己用hasj碰撞撞到一个10w美元代币的账户。imtoken都把算法出处说了。
                    比特币要求的签名算法不仅生成密钥对的时候需要好的空间范围随机性，而且在签名的时候也需要好的随机源，不然容易泄露私钥。
                    诶菜才回三门牛早去杭州了
                </span>

            </p>
            <p>3 比特币中的数据结构
            <span>
                区块链也就是由一个个区块组成的链表。想象一个创世区块被第二个指着，第三个指着，然后继续，后一个区块存储前一个
                区块的HX，防止篡改。篡改传递。只要记住最后端的一个HX或者记住中间随便一个都可以去验证前面的区块。牵一发动全身。
                减少存储空间只需要记录几千个最近区块。去中心化的防止恶意节点。
            </span>
                <span>另一个数据结构是，merkle tree 只要记住根hash值，整颗树都能知道有没有被修改。比链表的效率更高一些。
                最底层是 data block 记录的是 交易 然后一层一层 HX HX F(HX HX) 上去到根hash值 上层全是hash pointer
                哈希指针。每个data block 都分header 与 body  header只有hash值  body则有交易的内容。MT有什么用呢，提供mercle proof。
                比特币有两种数据节点 全节点与轻节点 全节点含有头与身体，轻只有头，轻一般是钱包应用。MT包含在区块链的一个block中，应该就是body。
                那么如何向轻节点钱包证明某一条记忆记录已经被写到区块当中了呢。需要证明 也就是从叶子节点到根节点的一个路径。需要从自身的tx交易
                出发 提供HX 与自身另外一个HX 在上层依次到根节点。重节点要将mp 发送给轻节点用来证明。篡改 hash
                膨胀只能理论科学 collision resistance
                ologn 伙伴证明 on 非伙伴证明，但是叶节点的排列顺序对hash做排序则出现好的结果ologn 其实就是线性二分。
                sorted merkle tree 比特币不要求作顺序 比特币不要求不存在证明 二分的无环，总能二分到一对上或者中间的hash也就能
                找不存在。对啊 区块链的鸽子笼原理 怎么保证无环的区块</span>
            </p>

            <p>4-BTC协议
                <span>央行发行数字货币。央行的公钥对所有数字货币加密并且自己保存私钥，私钥给所有的数字货币做前面。
                所有帐户都有公钥能够对数字货币做验证，是否真的是央行发行的，盗取央行的私钥。数字货币就是个文件，文件可以复制，就是不能够复制。避免双花
                    。那么假如对所有数字货币进行编号记录在一个大数据库里面，而且要知道币在谁手里。不仅验证真币还得验证在谁手里。
                    但是这又不是去中心化了，可以这么做，但是并不去中心化。要依赖我们的区块链。
                    比特币系统的铸币权 铸币税是由挖矿决定的,数据结构不仅仅是央行维护的，而是所有用户共同维护就是央行.
                header 中的5个字段就是hash 以及 MThash version target nonce</span>
                <span>例如一个例子 A(10)->B(5)||C(5).比特币转账要说明两点一点就是币的来源合法另一点就是接收方的地址 ，mint。需要插图了。把钱
                转给别人需要自己的私钥签字，私钥做的事情代表是自己本人以及做本人才人做的事情。交易区块不仅包含哈希指针，
                而且还包含指向币的来源的指针，其实也就是写个字段 或者通过某种形式的next list指向来源</span>
                <span>繁琐的玩具  A给B转账 A需要知道B的公钥地址账户  B也需要知道A的公钥用来签名而且需要知道A的余额。所有节点都需要知道A的公钥。
                这不就得持有太多太多信息了，所有人如何知道A的公钥，完美的安全感觉效率太慢了，可以牺牲一部分吧。A给B交易本身则需要
                    输入A的公钥。那么假设有一个恶意节点传输交易，传输自己的公钥并且用自己的私钥去签名而且以A的名义，不就花了A的钱吗。
                    所以需要提供A的公钥以及币的来源看看来源交易中的公钥跟A的公钥是否相等。币的来源是公钥的哈希。
                    例如A交易，本身的输入加上前面币来源的输出组成一个比特币脚本，试试看能否运行，也就能够确证是否转账。
                </span>
                <span>
                    比特币转账交易的记账权。如果是投票来取得consens共识，则每次的投票效率过低。于是需要选出可信的记账节点。
                    联盟链hyperledger fabic的做法就是几个大公司组成的节点是可信的，然后由这些节点记账。也就是超级账本。比特币不是这种
                    方式去获取记账权，而且记账权的设计应该要满足应记尽记录，而不是有自己的私心决定谁能够被记录谁不能。另一种投票方式
                    是按照账号投票，这样不公平，因为恶意节点可以注册大量的废马甲来恶意投票选出恶意节点，这也被叫做女巫攻击 sybil attack.比特币通过
                    挖矿争夺记账权，本质就是算力来做记账权，本地node不停的试H header+nonce 4个字节的nonce 的随机域低于target来满足符合要求的条件，
                    比特币系统根据要求来动态调整target的前置0，以调整挖矿难度，比特币设计21w个区块过后，初块奖励减半。最开始的coinbase
                    有50BTC，后来是25，再后来12.5比特币网络是不断通缩的。比特币中的共识机制就是通过算力pow来挖矿争夺记账权。
                    分布式协议PAXOS与RAFT这边先不表，前者满足三大性质CAP的consistency一致性。CAP涉及拜占庭问题，且三个性质为不可能三角关系，
                    即最多满足其中两个，有个政治笑话说得好，良知真诚党性最多满足其三。其中A为 可用性Availabilty、，以及分区容忍性 prtition tolerance。
                    FLP三位在分布式领域的专家人物，分布式恩好好学，然后肖老师的背景也是做分布式出身的。做科研懂大框架，找地方修补，然后
                    找方向。弹幕说500个超算中心不如一个ASIC矿场对于比特币的挖矿。还有一个重要的性质，也就是最长链原则，当你挖出区块的时候，
                    不要高兴太早，应该要祈祷别人没人跟你同时挖出，不然的话要竞争成为最长链条，这也是共识协议POW的一部分，
                    而且当成为孤儿节点的时候，由于在非主链上币的来源不合法，其上的所有交易信息都将不被承认。
                </span>

            </p>
            <p>5-比特币实现
                <span>比特币的全节点在内存中维护一个数据结构叫做UTXO，记录那些未被花掉的BTC。比特币矿工除了去争夺记账权获得coinbase的奖励之外，
                    打包交易还有一个打包费用，但是在例子中一个区块的出块奖励是12.5btc 远远大于fee 0.12 100倍。一个区块在比特币中的规定是只有1M大小，
                    比特币有使用TX base 基于交易的记账系统，他的特点就是无账户，所以需要去计算币来源防止双花，另一种以太坊，则类似银行，
                    是一种基于账户的记账系统，大概记录了那些账号存在有多少代币。那么挖矿的nonce 也只有2^32的可能性，小于整个2^256的解空间，也就是对于
                    全遍历而言依然还有可能是挖不到矿的，在数据字段中，MT hash是可以修改的，这很神奇，因为第一个TX交易为自己的coinbase，在coinbase
                    中写任何东西都没人管，所以会产生一个8字节的额外随机数，总共就是2^96,这样挖到矿的概率就高了，毕竟前导0得256-96=160个才在一个比较
                    均匀区间去限制我们挖矿 puzzle。交易执行脚本，为前节点的输出币来源与后节点输入币去处加在一块执行，这是比特币脚本，以太坊智能合约应该也差不多。
                    比特币挖矿寻找nonce，对于单次而言是独立的的伯努利，无记忆性的，对于一系列的nonce而言是泊松分布，学过概率论知道，指的就是单词概率
                    低而重复多次的，同样也是无记忆性，以概率密度保障出块时间为10分钟左右。那么所有的比特币是2100w个这个我以前就会算，在这里也就不表了。
                    对于某次挖矿，10分钟都未曾产生区块，那么产生区块的可能时间依旧为10分钟，从任何一点去切概率时间密度函数都是无记忆延续的结果。
                    挖矿耗费大量的电力，那么它到底有什么意义呢，当然有为了比特币整体的安全性，矿工目前是在为了初块奖励，但在将来为了
                    矿工费fee，保证系统的诚实节点足够才是比特币网络的安全。前面说的nonce+MT hash的 96位 其实是两层for循环，
                    外循环是2^64的mt hash 外循环是2^32的hash。那么假如有个不诚实的恶意节点M获得记账权，乱记账怎么办。
                    1.A->M 记录A给自己转账 不行因为没有A的私钥来签名
                    2.M->A 后M-M' 双花，也不行，无法通过诚实节点的验证，诚实节点不会在这个区块之后挖，而是分叉出来挖，导致这个区块的初块奖励作废。
                    保证共识POW不仅仅是选出诚实节点作为记账矿工，而且在最长链方面也保障了整个比特币系统的安全。也有可能恶意节点会拒绝记录那些
                    合法的交易内容，这些交易内容可以留在下一个节点去记录。还有一种攻击叫做self mining 也不行 在算力不足的情况下竞争过
                    最长链的可能性很小，基本是薄一博单变摩托。而且偷偷藏着可能会导致前面的初块奖励作废。一般都是6个区块的 confirment，
                    但是目前比较多用的还是最先接听原则，即M给A了 就不再接听M给m'。好了 结束 我喜欢zhenxiao老师 听课是真爽。
                    更mit的吉尔伯特的线性代数一样。北大的老师比较放飞 郭炜也是

                </span>
            </p>



            <p>6-比特币网络
                <span>应用层即 区块链，网络层即p2p的tcp网络，假如挖矿网络需要一个总之节点，就是接在上一个节点之后计算nonce
                难度target hash的一个预备节点。</span>
                <span>flooding 邻居，轻节点验证需要依赖重节点，选取周边节点作为邻居，并且转账无论远近时间上几乎相同。假如同时A-B A-C
                那么在区块中有可能是被写入前者有可能也是后者，看先后，然后看哪个节点计算的运气比较好算出nonce并且被接受，哪个节点最后就被
                挂在链上，上面的交易是合法的，是重节点。账本</span>
            </p>


            <p>7-比特币挖矿难度
                <span>target=pre_target*(2016block_time/20160min)或者diff=prediff*(2week/2016block_time).通常target前面至少有70个0，
                基本上需要10^21个搜索空间所以很难搜索，比特币每2016个去区块之后调整挖矿难度，难度区间在[1/4,4]，之间，保持简单鲁棒但是并不一定高效，
                出块时间设置10分钟和2016之类这些参数是中本聪自己设计的，可能有过一些调查研究总体而言数据还是比较保守的。出块时间不适宜设置过短，因为
                过短可能会导致多分叉，而造成算力的分散，使得恶意分叉最长链成为可能。了解加密货币历史的应该知道，其实比特币并不是最早的加密货币，
                只不过去中心化的区块链体系是比特币建立的，而且比特币并没有法币的挂钩支持。在比特币之前就有几十种加密货币，只不过他们都失败了。
                比特币目前的价值我看到是作为一种委内瑞拉保险存在的，在俄罗斯 阿根廷 等等一些货币贬值严重又拿不到美元的地方，持有比特币的市值比较多。
                而对于以太坊而言，对于孤儿节点是不丢弃的而是给一个uncle reward也给予一定的奖励。GHOST并且以太坊似乎每个节点自己本身可以调整难度，比特币则是写好
                的代码规定2016个之后必须调整难度。</span>
            </p>

            <p>8-比特币挖矿
                <span>前面先介绍了比特币的轻节点重节点的各种功能属性。比特币挖矿总是沿着最新的节点往下挖的，比特币系统的
                的安全性由密码学以及共识来组成，但是共识机制正在受到挑战。矿工挖矿在这么庞大的算力面前其实有点冒风险，并且收益不稳定，
                    因为虽然10分钟出一个出块奖励但是对于每个矿工而言能不能挖到矿还是小概率事件，所以出现新的机构来均摊收益，
                    这叫做矿池。这边说一点题外话，最早挖矿家里的通用cpu也能挖，但是太不划算，因为只用到一些整数计算的指令与电路，
                    大多数内存以及cpu资源并没有被使用到，后来是gpu但是gpu也有很多没有用到，造成GPU涨价的有老黄的阴谋也有当矿机的原因，跟深度学习其实没有太多关系，说道深度学习，GPT-3造许多个自己，比如浮点计算等等在深度学习中计算梯度很有用的东西，
                    后来出现了专门挖矿的矿机ASIC芯片，专门设计某种解某种算法的电路，优点就是高效，缺点就是太过专一化，当币没有价值，
                    或者算力落后就直接报废淘汰没有别的作用，而且AISC芯片的设计周期至少得是一年，大多数AISC矿机的最大
                    利润也是在前两个月获得的，后面就是会出现更强大的矿机。而且矿机制造商是有套路的造出矿机一般都是自己先使用来挖矿，
                    告诉矿工还在调试来割韭菜，最后到矿工手里也不是最先进的了，矿工被割韭菜矿工泪目。我之前在杭州有个章bitcoin他在买矿机矿池的算力，
                玩的跟云计算一样，我估计也是被割韭菜的不知道他现在怎么样了，那种AKB-48币到底有没有赚钱，好像还要锁仓之类的，都是套路。
                这种需要ASIC且大部分算力被掌握在专有公司的中心化挖矿，并不符合最初比特币的去中心化设计初衷。所以现在也出现AISC resistance 抗ASIC的
                alternative puzzle的算法，矿机的军备竞赛。好的我们说回到矿池，好处就是均摊收益，使得收益比较的均摊化，给矿工
                一些确定性。它由pool manger以及矿工组成，矿主是全节点，矿工是轻节点。矿工可以是同一个机构制造的矿机，也可以的
                分布在全世界各地，通过某种特殊协议与矿主联系成为矿工。挖矿是难的，矿主为了避免吃大锅饭不去搞平均主义，而是降低挖矿
                难度，将原先要求至少70个前导0的挖矿target改变为60个0，派发自己的nonce nbit 以及coinbase p 给矿工作为 mining puzzle计算，然后60个0的计算结果，
                被叫做share，是一种almost valid block，这种区块虽然没有用，但是作为避免大锅饭怠工的一种工作量证明。矿工作为轻
                节点就类似于是一个不明真相的群众。他只管挖矿计算nonce，而矿主掌握算力与分发权力。当矿主的某个矿池出现51%超过情况下，矿工也不知道
                这种情况的发生，依旧闷头挖矿。那么51攻击怎么攻击呢。前面我们知道是分叉攻击，自己去获得最长链去故意回滚别人的交易。线上系统永远无法解决线下系统的问题。
                当比特币价格一下子跌了80%的时候就发生矿难了，当年那是以前的矿难会放出大量的矿卡cpu。由于矿主分发的nonce以及
                coinbase p是包含自己的地址信息的，所以不存在矿工挖到nonce偷币的情况，而且矿工捣乱不提交结果也是损人不利己。第二种51攻击
                就是一种排挤制裁，假设51的算力不允许A的任何交易操作被写入区块链中，那么其他区块也会考虑舍弃A的交易结果。以避免
                被硬分叉误伤导致拿不到出块奖励。但是51算力做不到盗取比特币，因为没有私钥无法签名。</span>
            </p>
            <p>9-比特币脚本
                <span>也没咋么听懂，特别是后面的p2pk p2pkh proof pf burn .基本听懂就就是，将前一个脚本的output与后一个脚本的input粘合，
                    第二点就是发生一次交叉，先执行后一个节点的输入再去执行前一个节点的输出。我这边做一下会议。
                    p2pk 就是把钱付给公钥地址   钱的数目 签名 公钥地址，算了回忆不了。得实际代码时间，概念性的东西需要到代码中有些区别，
                    说一下burn 就是把一些内容写在return后面 return后面不执行，这里两个用处一个是销毁一定数量的比特币去发行新币，另一个就是
                    记录一些内容，(阿里巴巴说央行虽然推出了数字货币，但是空洞无物，没有实践。我发现我对于不懂的东西也习惯先吹为好，这样浮躁，还是要了解知识为基本)
                    当然这些内容也并不一定需要销毁一定数量的btc，但是打包手续费还是要有的。以太坊消耗GAS，做技术分享。

                </span>
            </p>

            <p>10-比特币分叉，肖臻老师真就是苏格拉底式的教学，我以后培训班教学风格可能是肖-垠-吉尔伯特-费曼式的。
                <span>分叉有好几种形式。
                    1，正常过程中几乎同时产生的两个区块，广播的范围覆盖造成的分叉，这个分叉会消失。被叫做state fork。
                    2.forking attack分叉攻击，即比如51攻击这种，超过最长链条。一般分叉攻击都的目的用来双花。
                    3。protecol fork 协议分叉。其中分为硬分叉与软分叉。
                    先来解释什么是硬分叉，一句话的定义就是硬分叉造成永久性的分叉为硬分叉，新协议区块兼容旧区块，旧区块不兼容新区块。(这里解释需要图片，看来P开头的ProcessOn工具有用武之地)
                    举个例子，例如比特币的区块大小被限制为1m大小，1M也就是10^6B，每个交易大小大概在250B，所以一个区块最多大概包含
                    4000个交易，而这4000个交易又是在10分钟之内完成的，4000/600～7 即7个/s的ps，这个速度真心很慢很慢了，所以有人在社区
                    提出要修改比特币协议中的区块大小为4m为其扩容，但是社区有些保守派不同意，但是大多数人还是同意你的选择，这里指的大多数人
                    并不是账号而是指算力，当然不支持你的人也有理由，比特币广播 flooding区块非常吃带宽，当增加区块大小，相当于几何级别的增加
                    广播难度。但总之最后大多数算力都同意扩容为一个4M大小的区块，于是开挖。挖出第一个为4M大小的新区块Q。老节点不认可这个新区块Q，于是仍然
                    在Q之前的区块接着往下挖，一旦当旧区块链上存在有新区块，旧区块就要搞分叉，不认可即使它是最长链，但是新区块大小小于1M的可能性也是有，也能够被认同。
                    历史上出现BTC与BCH的硬分叉，也出现ETC与ETH的硬分叉，社区出现分歧，于是各走各的路，但是分叉初期，居然能够重放，即一个币在两个链上都能
                    花，后来为了应对这个情况，给header新增了一个字段，叫做chain_ID用来防止硬分叉后出现的双花。当网络中所有节点协议一致是不会出现分叉。
                    解析软分叉，即不是永久存在会消失的分叉，新节点不认同旧节点，旧节点认同新节点。举个例子，上面的从1M改为0.5M，即
                    当系统中大多数为新节点，倘若运气好旧节点挖出第一个节点Q，但是新节点不会承认它，而且新节点的算力高，新节点会分叉出一条新链，
                    旧节点认为新节点也是合法最长链，于是在新节点上挖，但是每次旧节点挖到，新节点都分叉不承认，所以有种鼓励旧节点的感觉。
                    区块链是去中心化系统，不同于其他系统，修改某些参数极易引起分叉。这就是硬分叉与软分叉的区别。
                </span>

                <span>投资浙大中控 超级有必要与意义
                    厉害了 真的 我真就想买浙大
1	褚健	72361750	16.37
2	杭州元骋企业管理合伙企业(有限合伙)	39500000	8.93
3	浙江正泰电器股份有限公司	36509375	8.26
4	中国石化集团资本有限公司	21890000	4.95
5	英特尔亚太研发有限公司	21875000	4.95
6	褚敏	20623548	4.66
7	申万宏源中控技术员工持股1号单一资产管理计划	20436563	4.62
8	兰溪普华壹晖投资合伙企业(有限合伙)	19544232	4.42
9	上海檀英投资合伙企业(有限合伙)	18471786	4.18
10	中核(浙江)新兴产业股权投资基金(有限合伙)	13270000	3
合计	284482254	64.34
上市估值200e  最后估值应该在500e左右吧  一年利润也才   7e
                </span>
            </p>

            <p>11-比特币问答
                <span>Q1 转账交易对方不在线怎么办  不需要对方在线 只需要对方的公钥地址就可以
                    Q2 可否跟一个没见过的账号交易  可以 但是没见过的账号很有可能是死号，本质上区块链币的来源不是一个具体的值而是计算过程函数
                    Q3私钥丢了怎么办  凉了
                    Q4怎么有效的保存私钥  硬件钱包 冷钱包
                    Q5私钥泄露怎么办 赶紧把全转走
                    Q6转账错误怎么办 很难办
                    Q7BURN 返回错误还怎么写入到区块链当中，只是验证 交叉交易的前者in，而不是后者的output，得等待花这个币才要去验证。这个时候是错误的 永远花不了。这种方式也不被提倡因为造成UTXO膨胀以及通缩
                    Q8 挖到的nonce能否被其他矿工偷 不行，自己组装的交易才符合对前者target的要求，当没有nonce的时候，自己创立基础的区块一边记录交易信息一边挖。nonce本身与自身的第一个交易TX契合
                    Q9MT 应该数组形式存储 这样创建一颗二叉树  对一个数组形成的二叉树快速求hash
                    Q10 交易费怎么算 输入BTC-输出 就是交易费
                </span>
            </p>


            <p>12-比特币匿名性
                <span>
                其实比特币中的匿名性并不好，去中心化也有去中心化的代价。即当你的公钥地址与现实的身份发生关联的时候，你的身份也就暴露了。
                    比特币的匿名是通过未名或者化名实现的，可能会准备许多个地址来隐藏其中，但是总是能找到一些实际找零这个漏洞找出你的
                    真实身份。例如你有两个账户 4 5 要转账  6 3 我们知道 3肯定是找零账户。比特币支付其实是个bad idea 因为第一个到帐速度不是实时，
                    第二个不是稳定币，汇率存在波动，第三个容易与自己的身份关联暴露。比特币门头沟当年占据比特币交易的70%但是被黑客盗了，
                    然后就倒闭了创始人被抓去坐牢。中本聪因为从来不花也没再世界上张扬，所以全世界都不太清楚他是谁。有人说他的创世区块私钥丢了。
                    有人说他已经被秘密干掉了。有人说他仍然在秘密的生活，总之说话很多。信用卡的信息当年被公布出来做研究，虽然有了一些加密措施，
                    但是还是容易在现实世界发生的一些交易行为，时间戳地点，给找到时间的关联。以前也有用比特币做非法的毒品交易的，但是创始人虽然
                    并没有花任何一毛钱的btc还是被抓了，还是自己在现实的身份泄露，所以寄希望与比特币来保持匿名性，干坏事基本都被抓了，中本聪
                    只是个例，而且还是他自己的身份信息保存的比较好。现实一点讲比特币分两层来讲解匿名性，低一点TOR跳板路由，即分好几层过来的信息，
                    使得溯源变得困难，这也是常用vpn以及一些匿名浏览器的功用。一些人使用vps是会再开个tor。第二点应用层可能就是通过coin mixing，
                    这也是管用的技巧，就是混淆一大堆人的身份，找不到真实的你，但是mix很多机构自身也是匿名的，也就是他如果跑路你是找不到他的。
                    交易所天然具有coin mix属性，就是法币-btc-usdt-eth-btc 这样你的btc来源跟原先肯定不太一样。、接下来要说的是零知识证明，
                    也就是不需要提供出这句话本身的信息来证明他的正确性。数学上的同态隐藏就帮助BTC系统提高安全匿名，其原理是
                    x！=y Ex!=Ey 注意这里的EX是绝对不等于EY的，跟hash的有可能相等是稍微有一些不同的，而且满足一下几个线性条件，
                    Ex+y=EX=Ey Exy=EX*EY 等等。每个X对应一个独有的Ex 这并不是说是单调，也可以不单调。当Alice要给bob证明他有X与Y满足
                    X+Y=10时候，只需要发送Ex+k Ey-k 给BoB bob通过Ex+k  +  Ey-k 来验证是否等于 E10 则有x+y=10.公钥加密私钥解密公钥验证私钥签名体系，
                    可以也不可以算作零知识证明.学术死板的一些规定都可以不去管。前面的k是用来防止被作为暴力遍历破解的。
                    关于零币零钞，也是通过更强更复杂的数学知识来保证更好的匿名性，但是必须以性能作为一部分的代价。零币指的是，币的编号是由自己生成，与BTC
                    不一样，虽然都是由央行发行，央行的私钥签名，但是是一种盲签，也就是央行并不知道他的编号，但是央行知道这个币是合法的，当币
                    支付的时候，央行签名一次然后给A账户去掉一个给B账户增加一个。这样
                </span>
            </p>

            <p>13-比特币思考
                <span>
                    开篇警醒语录。保护你的好奇心与想象力。同学们不要被学术限制你的头脑，也不要被程序员限制你的想象力。
                    我呆在三门这么小地方也绝对不要就这样被限制才华的发展，仍然要坚持努力，总是会有不一样的结果梦想。
                    人生的意义在于有结果有意义的奋斗。不在于满足一个个欲望。
                    比特币中的区块hash，实际上并不是链表，只是在本地保存一个kv的levelDB，k为hash v为整个区块的内容，这样就可以通过最后一个hash，
                    去寻找整个区块链的所有区块信息。区块恋，指的是一对情侣将比特币保存在私钥当中作为定情信物，当修成正果之后，再将比特币取出，其中
                    两人各自保存其中一半的私钥。这样不是安全性会降低一半而是会指数的下降2^128,这样的做法非常不安全，可以使用我们上次介绍的，
                    多重签名，而且多重签名的做法比较的灵活。如果没有翅膀必须自己多加努力，起飞，永远努力不要放弃，路正确时间问题，我哭了。
                    BTC实际上并没有绕开分布式共识，非常容易被攻击破坏分叉，理论上分布式共识是不可改变的但是实际发生变化，这里老师
                    讲故事，实际的模型与现实的模型并不一样。比特币由于是通缩的一定程度上保持了他的稀缺性，但是经济发展财富增长，适度的通胀是有益的，
                    而且对于比特币这样的财富会集中在已有的货币上，这就像北上广深的资源与其房价。货币金融学。量子算法虽然会破坏现有的密码学，动摇
                    比特币的基础，但是比起考虑比特币的安全性，实体的金融更加容易受到冲击。HASH sha-256 是有损的，如果无损的话，那么他是一个
                    超级无敌的压缩算法。
                </span>
            </p>

            <p>14-比特币总结  我自己总结
                <span>
                    讨厌多次一举，温故知新。区块链是一个去中心化的账本，比特币通过生成公私钥队，公钥私钥都有其配对作用。比特币通过执行脚本验证合法性，
                    区块链是一个看似为hash指针的链表，虽然存储在硬盘的kv DB而且通过内存的UTXO集合管理币的来源。
                    转账:公钥地址hash作为地址，转账仅仅需要对方地址 不需要对方私钥，而需要己方的公私钥
                    挖矿 竞争记账权 pow 尝试nonce 保证系统安全
                    安全性 密码学上的安全性  共识机制上的安全性  最长合法链
                    匿名 比特币的匿名性叫做未名 不要跟现实世界发生任何交互总是匿名的.
                    分叉 恶意的攻击分叉 以及硬分叉 软分叉，新节点都占51%以上。硬分叉永久存在，旧节点不认可新节点要分叉，新节点认可旧节点。软分叉是旧节点认可新节点，但是新节点不认可旧节点。
                </span>
            </p>


            <p>14-以太坊概述
                <span>
                    对比特币运行中出现的问题优化产生的区块链2.0，以来GHOST初块时间设置为10几秒，挖矿问题mining pluzzle 非ASIC，是高内存的方案。
                    取代POW生成POS新机制，基于权益的投票，类似股份制，stake.货币可以去中心化，那么还有什么可以去中心化呢，就是合同，所以产生只能合约。
                    BTC最小为一聪，ETH最小为1wei，Vatalik以太坊创始人的意思。去中心化货币的优势就是跨国转账，去中心化的智能合同的优势就是
                    跨国的司法困境，通过技术手段限制。用技术去方便与取代一部分的政府职能。好像马云做的很多东西都是这方面的，蚂蚁链，咸鱼小法庭。
                    卧槽我想做的降低司法成本的维权成本的东西原来马云已经开始做了。
                </span>
            </p>


            <p>15-以太坊账户
                <span>
                    以太坊是基于账户的，btc交易需要验证币的来源，但是以太坊账户余额，组成的状态数被所有全节点未出，比特币的币来源可以防止双花，以太坊设计
                    nonce计数器用来防止双收，双花是花钱的人不老实，双收的是收钱的人不老实，重放攻击。不需要说明币的来源的这种基于账户的设置一方面是比较自然。
                    以太坊中存在两种账户，1 外部账户 有balance 余额以及nonce 计数器，一个交易内容必然会给到nonce+1,例如验证，某个nonce21是原来nonce状态20的+1，
                    则这个交易不是重放攻击，所以交易完成之后账户的nonce状态修改为21. 当再来一个nonce21就是重放了。另一种账户叫做合约账户，有code与storage两种
                    字段状态，基于合约账户可以产生一些金融衍生品，例如预测投资往里面投钱。币就是票，以前我是听说不满意结果就可以收回来。
                    基于智能合约的技术会给我们的社会带来什么影响。现在一个新技术出来，立马就有人要去占据专家的位置，来思考这个技术会给人类社会带来
                    什么影响，可是其实做技术的人都没想过。就很滑稽。
                </span>
            </p>


            <p>16-以太坊状态树
                <span>
                    内容好多 看得我都懵了。只说一下我看懂的东西
                    1 prefix addr next node 这种结构组成一个trie字典树我是懂得 但是要变成Mercle tree 的hash指针的做法我就不懂了。 大概是next node要一种hash的方法去对应，但是 hash(什么)呢
                    2 维护状态树，类似于是一个交易驱动的状态机。是s1->s2 这些个信息论的玩意 隐马尔可夫链
                    3 trie 字典树 能回忆的起来么不是二叉树 类似字典一个是26+1的位置  最后加一个末尾的结束节点，对于以太坊160位的地址 40h个16个进制数保存，17个取值可能包含一个
                    末尾节点，40的树高度。MPT也就是 Mercle patricia tree 把一些稀疏节点直接整合到一个区块，降低访问内存的次数。
                    4 映射为什么不用hashmap呢，虽然有hash碰撞，主要是为了一致性，就是所有的账户都是按照一定的hash地址排列，Mt hash一致，
                    而且很方便的去做不存在证明与存在的MT proof
                    5 一些字段先不写了
                    6

                </span>
            </p>

            <p>17-以太坊交易树与收据树
                <span>
                    可以给一些没见过的节点转账，但是状态树必须完整，这才是完整节点，不是交易账本而是账户账本。不用每次都递归回到创世区块。
                    一些代码看不懂 说是Go，不应该去其实工具，拿起来就用。
                    BLOOM filter 布隆过滤器作用就是去查找一个值是不是在这个集合里，具体eth好像是2048位的摘要向量。对集合的所有值进行取hashmod2048，
                    最后落入的向量值改为1，生成这样的摘要，然后可以用来验证，以前在吴军的数学之美里面看到碰撞可能，但是总体几率在长度特别长还是可控的。
                    缺点就是删除不方便。
                </span>
            </p>

            <p>18-以太坊GHOST
                <span>IT世界变化太快了，我这都还没有学联盟链，DEFI以及eth2.0呢。eth这样对于创业股东这么好，迟早会出来新的创业者。无产创业者
                    前面的没看懂，今天一下子就看懂了。老师讲的python伪代码。挖矿的两个趋势ETH还是没有阻止住，也就是设备专业化GPU，算力集中化 矿池。
                    但是值得高兴的是ASIC resistance 做到了，因为eth的挖矿需要内存的参与，不仅仅只是计算nonce header的hash，GHost共识机制确定了eth的初块
                    速度大约是10几秒，速度大概是比特币系统的40倍率，安装当时的设计应该是多算算力对应多少收益，多少概率的。但是设计的不好的共识机制，容易
                    出现马太效应，尤其是这种集中化算计的矿池。比特币中的孤儿节点是直接丢弃了，这对于挖到的矿工很亏，而且容易造成算力的竞争分散。
                    对于大矿主而言当然会选择自己的这条链，对于其他群众而言也会选择算力多的，更容易成为合法最长链。一定程度的马太，eth对于这种孤儿节点，
                    有另外一种叫法，叫做叔父节点。很有意思，给叔父节点7/8的收益，例如最初的eth出块奖励是5个以太币，后来是3个，现在是2个，由子孙节点去接纳他们的
                    叔父节点，并且接纳也会有1/32*x 的收益，每次最多两个叔父节点，当然把叔父节点写入自己的区块链，一些hash是要改变的而且并不执行，叔父节点的交易信息，
                    或许跟本节点没有冲突，但是跟前面的父节点可能会有冲突，这做法相当于是一种招安，希望早日的集中算力，并且及时遇见恶意节点选择不记账，
                    也就轮到下一个，一直有6个区块可以来记账，分别是7/8->2/8这样的收益递减，对于不记账的节点也失去了1/32*x的收益。对于叔父的儿子节点，
                    是并没有奖励的，这也在不鼓励分叉攻击，不然分叉不仅没有惩罚还有奖励，岂不是乱套了。一定程度也减少了链的枝节，减少复杂度。这里设计的7/8变成1.01这样会
                    不会出现利他的那种区块链设置呢，也不得为知。flooding到所有的节点，交易即使没被前节点接受也会被别的节点接受。
                </span>
                <span>
                    挖矿奖励分为静态与动态收益，在比特币当中就是出块奖励与交易费，在eth当中分为出块奖励与GAS汽油费，发布只能合约需要缴纳汽油费GAS，
                    这个当初在杭州的meetup我也看到了，还有执行只智能合约的矿工获得汽油费。每次挖矿也会产生汽油费。汽油费对矿工而言貌似是个敏感的
                    东西，汽油费又似乎有可能以一种代币的形式出现。我之前还以为以太坊不广播呢。但是叔父节点并没有汽油费，很遗憾没有。
                    eth btc都基本经受住了时间的考验没有出现大的乱子。其中不仅程序设计理念很重要，制度设计，怎么分配利益吸引挖矿，营销社区宣传
                    也很重要。
                </span>
            </p>


            <p>19-以太坊挖矿算法
                <span>
                    eth的挖矿算法，当初中本聪在比特币的论文里面描述一个很美好的场景。即one cpu one vote，但是后来ASIC加入明显挖矿远离普通人而去了。
                    eth设计就是为了ASIC resistance，但是这最早并不是eth提出的而是另一个富盛名的litecoin，的scrypt。它设计了一个大小为128k大小的数组，
                    按照java 4bit一个int的做法，那么数组可能有30000多位，设计思路就是，得到一个seed种子，这个种子不是由nonce与header得到的，这里我出现
                    一点点理解上的歧义，在代码中似乎不是的，nonce与header得到的hash是mix。seed的hash就是第零位的数字，然后对第零位的值再做hash，得到
                    第1位，以次类推得到整个数组，然后按照随机数hash（nonce,header）mod去找到第A位，拿到array[A],对值取hash再取mod然后得到B再array[B],这样子去做迭代。
                    最后得到我们的hash，做128还是256次，得到的hash然后求target域，不行再尝试下一个nonce。以此类推，每个挖矿重节点都保存这样一个128k大小的
                    数组，但是设计挖矿的算法必须是difficult to proof but easy to verify。轻节点没有保存128k的数组无法，参与挖矿，ASIC芯片没有内存，每次都计算
                    一遍数组不缓存的话，计算可太大了。所以初期还是取得一定成果的，但是逐渐到后期还是GPU ASIC化了。值得说一下莱特币的出块时间为2.5m。eth参考了莱特币的挖矿算法设计，
                    设计出 轻节点持有的初始cache数组 16M大小，类似于上面的128k数组，从seed出发计算整个16m大小的随机数数组，eth每
                    30000个区块就调整一次seed，对其做hash，我这边没看过挖矿难度调整，假如是一次hash那么不就相当于整个数组前移一位，
                    也就很简单，所以我估计取hash应该还会有其他的料子。全节点持有一个初始为1G大小的Dataset，DAG，它的生产算法我自己能默写，
                    我说一下就是第i个cache的值^i得到初始mix，做256次的 1.mix通过from产生index，2.mix与cache[index]的合成hash位新mix。这样一位一位的i
                    做下去生成整个1G初始大小的的Dataset，18年改成2.5G，每30000个节点cache与DAG都会变大1/128。还是很不容易的。我突然有点感觉这种增加难度的方法，
                    是给他们POS的股东爽的，给别人增加挖矿难度以成本，ASIC好不好还是的看掌握在谁手里的。重节点挖矿就要不停的header nonce->mix
                    index=from(mix)
                    mix=hash(mix,DAG[index])
                    mix=hash(mix,DAG[index+1])
                    return hash(mix)
                    mine(hash)<=_target_
                    做64遍也是128次.
                    对于轻节点就是去验证nonce 与header生成的最初的hash index与
                    根据index去计算 DAG[index]与DAG[index+1]这两个值为先后mix 然后验算hash是否小于target。
                    比较毁三观的是，eth的与挖矿的genesis的创始区块当中，有7千万个以太坊，3/4都是初始区块的，/剩下1/4是出块奖励，很小一部分是叔父奖励。肖老师吐槽北大教授穷啊。
                    创业与挖矿打工的区别。本质就是这种关系，最初的启动使能是怎么做的需要好好分析。方法很多预挖与空头，f开头的交易所当年。以太坊
                    为啥能防止ASIC另一方面是不停恐吓，不挖矿了POW，以后都是POS基于权益了，ASIC一年的设计周期，以及半年的盈利周期，这么弄受不了。
                    而且ASIC也有说是有利于整个区块链的安全的，自己不会害自己，攻击导致币价降低ASIC很贵，而且通用计算大多数算力在云计算厂商那里，
                    难保不会有人动歪脑筋。好的结束

                </span>
            </p>


            <p>20-以太坊难度调整
                <span>
                    以太坊会调整自己的挖矿难度，用来保证出块时间维持在15s左右。其难度公式被设计如下
                    Dh=max(D0,ph+x*s2)+&
                    解释一下这个公式，D0也就是131072这个初始难度，保证难度不会跌落到0，
                    ph则是父区块的难度，x为 ph/2048的乡下取整，是调整的单位，而s2则是本区块的时间戳(s)减去
                    父区块的时间戳 /9，
                   s2= max(y-[(Hs-Ps)]/9,-99) y则为包含叔父区块的关系，包含为2，不包含为1，按照这个公式我们可以
                    给出一个例子，当没有uncle也就是y=1的情况，在[0,8]的情况下则乡下取整为0，则s2输出为0，则不增加难度，
                    当[9-17]的情况下乡下取整则输出为1，则增加一个1/2048的父节点难度。
                    最有意思的东西，就是&这个难度炸弹，当年BTC2017被BCH强行分叉，导致社区分裂。未来不是pow而是pos的权益的时候，
                    。这件事情的本质是这些占据大头的股东资本家们，不再发行新币而把低端矿工全赶出去，剥夺他们打工的权力，这对那些
                    手里有矿机的矿工是巨大损失，避免矿工去分叉，而选择弄一个难度炸弹去折腾。比如难度炸弹一下子增加很大很大的值，
                    或者难度回滚300w个区块大小。之前有拜占庭区块，后来又君士坦丁堡区块。(看到这俩我想到了西方史)凯撒 利维坦 真有意思
                    真有意思，大概就是这些难度设计来调整难度 target。感觉是军政府韩国，威权主义，地下矿工只是为了演一场戏，真正受益
                    最大的一块还是他们以太坊的创始人的，简直毁三观，皇室特权。
                </span>
            </p>

            <p>21-以太坊权益证明
                <span>
                    今天没上课，被昨晚的乱码未导入事件吓到了。尼玛。
                    好了回归正道，不正确的睡觉时间以及上床玩手机的习惯会导致睡眠不足，导致自己很累，昨晚也就睡了3小时，今天一瓶红牛下肚，
                    感觉肝在隐隐作痛。权益证明POS，以前POW，工作量证明一直被诟病是非常耗电的一种无意义行为，不停的计算没有什么实际意义的nonce，
                    为了使得区块链得以延续，争夺区块链的记账权。我们这么来形容比特币以及以太坊的消耗电力水平。KWH 千瓦时为10^3 数量级  TWH为10^12 数量级，
                    BTC 17年 大概消耗，70TWH的电力，大约是600w个美国家庭的年用电量，占了世界用电量的0.31%，相当于智力这个国家的用电量。
                    平均每个交易消耗1000多度电，信用卡系统的每笔交易远远小于这个数量。挖矿收入60e美元 挖矿支出35e电费，收益率看似不错。
                    那我们来看看eth的能耗 为20TWH 占据0.09%的世界用电量，67度点每个交易，因为出块时间短了么，50e的收益 25e的电费，收益看似也不错。
                    相当于荷兰这个国家的用电量。依旧远远高于信用卡的用电量。挖矿的拼算力的，但是本质上仍然是拼钱的，外部交易，
                    通过美元不断的购买矿机增加算力，所以工作量证明的共识并不是一个闭环的区块链世界，仍然容易被外界的大佬用美元来攻击。
                    以太坊很早就提出要慢慢过渡到POS权益证明，也就是一种虚拟挖矿机制，虽然外部攻击的概率不大，但是在群体而言这种
                    进步就是一个大进步。以太坊有自己的权益证明的协议设计。casper协议 FFG友善的小精灵，持币投票，以票数
                    选出到底哪一条链为最长合法链，并不是算力决定了。我记得18那个时候有个交易所的交易即挖矿的机制火了。
                    这样要发动51%的攻击，攻击者必须买入51%的货币才能进行攻击，币价大幅度上涨，所有股东都受益。成本很大。
                    本质上一种拼钱耗电的POW，直接简单化变成比比谁钱多的游戏，更加简单直接，我只能说矿机商泪目。矿工泪目。
                    基于投票的POS要防止一些问题，比如一些账号在分叉出现的时候两边下注，这样即使失败了，币也没有在主链上被花出去，没有惩罚，
                    但是对机制造成了损害。以太坊引入Validator保证金模式机制，即投票要缴纳保证金，如果不作为或者两边下注要被没收保证金销毁掉。
                    之前还讨论了一种给币多的人一种挖矿难度调整降低的机制，这样有马太效应，虽然ETH对于马太效应没有极强的洁癖，但是这么明显还是不会做。
                    保证金投票后过了一定冷却时间，发现你的账户是在认真为社团做事的，保证金会退给你，然后也会受到一定奖励，那么没人
                    挖矿了，谁来组装区块呢，V账户吗。以太坊中投票的设计是没50个区块弄一个Epoch，这样100个区块就有两个epoch,没有有效的
                    epoch要求区块链上2/3的票形，按币值来算才成，而连续两个epoch才算绝对一下最长合法链。插嘴一下，对eth进行捣乱的柚子EOS已经凉了，
                    它是不挖矿的是基于权益证明的，也在18年很秀，我参与其超级节点出现前的买入，获得浮盈没卖亏了一些，它是根据币值投票从全球
                    选出21个节点，后来空投一些代币。然后一直处于调试状态，所谓的主网也没有拉起来，社区创始人不成熟，社区矛盾重重，后来就凉了。
                    也有人觉得区块链挖矿并没有浪费，全世界电力本来就非常难存储，存储能源技术的拼接，电力能量并不那么容易传输，许多大的互联网公司把机房造在数据库，
                    一来是省电，直接在电力的源头用电，二来是传输数据比传输电力容易以及便宜。区块链挖矿耗电本质只是消耗那些难以利用的电力并且直接将其转化为财富，本身并没有
                    带来很大的污染。我还是觉得浪费，但是既然目前没有好的办法去解决这些边缘电力问题，区块链挖矿也就没啥可说的。
                </span>
            </p>

            <p>22-以太坊智能合约
                <span>
                    哇靠，我一看这个视频的长度，137分钟，好家伙差不多相当于一部电影的长度，看下来是有点费力的。但是我还是坚持下来了，我已经对红牛没感觉了，看来
                    红牛还是有抗疲劳提神的功效，并没有提高体力什么的作用。
                    言归真传。以太坊的智能合约大多数都是使用solidity这门语言来编写的，它的语法类似于JS，我以前也看过感觉这个语言也不是那么的主流，meetup每个单元讲师
                    的课程栏目时间并不那么的长。其实跟Java也像，主要是强类型，还有EVM的跨平台，号称是世界图书馆世界计算机。
                    一个合约调用另一个合约一般有两个方法，1.直接实例化类的对象，用对象调用。2.addr.xxxx(kkkkk(string)) 用来生成签名值 call 签名值 参数，就可以找到函数去执行，
                    有点像Java反射从字节码去生成内存的意思。这大概就是这种编程语言的一些优点吧，而且奇怪的是虽然是图灵完备的，但是没有循环迭代功能，想要有只能自己来实现。
                    也有一个匿名函数 没有参数值也没有函数名，有点像谢斌是谁的意思。哈哈，我们普通的计算机以前是32位后来64位，而EVM是256位是那些无法比拟的。那么执行的
                    只能合约出现死循环怎么办。停机问题，理论上并没有一个算法能够不运行而计算出是否停机，王垠在停机问题的文章说了，能够停下的程序本质上一定有一个值是不停收敛的，
                    停机问题是没办法解决的，他不是哈密尔顿回路这种NPC问题，是指数时间非多项式时间，总能解出来，停机问题在理论是无解的，但是肖老师说过一句话，理论是理论现实是现实。
                    好了我们来看一下blockchain header eth 的那些字段，gas used  gaslimit，学linux的时候，听到一句话你们被windows毒害太深了，学区块链的时候又听到一句话你们被中心化毒害太深了。
                    used指的是所有的该区块交易消耗的汽油费，而limit并不是所有只能合约的limit值相加，而是一个限制区块大小的值，每个区块都可以根据上一个节点的limit来微调
                    其1/1024.别看1024不打，15s的出块时间很快就使得limit翻倍。调用智能合约是要消耗汽油费的，但是执行失败回滚只能合约汽油费不退，执行智能合约按照合约的limit拉来
                    一次性收取汽油费，多退，少回滚。而且连续调用情况下发生错误那些汽油费也不会还给你，难受住，别人的错误也要你来背锅。不过call跟直接调用不一样，前者回滚加返回false。
                    后者回滚加虚拟机报异常错误。财富数量是按照多少wei来计算的，所以才用int 而不是big dec，而且是2^64大小的足够是10^18数量级左右了。
                    1.对于区块链而言是先执行交易智能合约还是先挖矿。当然是先执行智能合约了，执行智能合约本地的三颗树才能把状态交易收据给算出一个确定的header hash，这样才可以去执行各种nonce，
                    为了一致性，也为了能使得挖到的矿被别人认可。而且gas汽油费很坑的一点就是，跟出块奖励一样都是属于挖到矿的，其他没挖到矿的等于为了一致性白白记录然后丢弃回滚，接受新节点验证，
                    然后继续挖，连一点GAS也没有，太难了矿工泪目。一开始是矿工赚钱，后来是卖矿机的赚钱，再后来只有早期的权益获得者赚钱。
                    那么区块链能不能支持多线程呢，也不行支持，因为多线程环境下造成的内存访问顺序不一致，无法保证一致性，这也是肖老师贴出当年的论文，他说这个课题很难，这个东西的理论证明或许就是
                    理论计算机科学家吧。值得一提的是线程之间的内存是透明的但是各自独立拥有部分的寄存器。此外eth中的随机数并不是真的随机数，不然的话也不能保证状态的一致性，
                    而是一种伪随机。伪随机与真随机的差别是什么，伪随机有规律只不过不容易找到是这种意思吗。后面的课程有点困没仔细认真听，都是讲一些实例性质的东西，
                    不过有三点值得注意，为什么是三点毕竟三生万物嘛。1.code is law 代码就是法律，智能合约一旦保存在区块链上面就没法修改了。比如拍卖程序，要是写错了，被攻击
                    每次都回滚，所有币都相当于锁死了。没有别的办法，虽然锁仓是由其他比如开发者这些用处，专心开发。这种模式挺好的提前讲好创业分配，创业不仅仅是打工，更加是合伙。
                    2.full_back函数容易被利用，要是自己不去显式的覆盖的话，容易出事。合同怎么发布到区块链上呢，好像是给0地址转账0个eth付汽油费就可以了。3.建议使用send transfer这些
                    固定gas的函数，避免重放攻击，掏空账户的钱三种停机方式，栈溢出，钱取完，gas用完，2300的gas费用只够写一个日志。干不了别的，其他还有比如先取出数据再将该地址
                    设置0的方式，发生错误则把num写回到0.这是一种区块链的经典做法。前面的code即是法律就像不可撤销的信托。后面的课讲的都是一些历史上区块链的错误做法导致的灾难，我记得
                    曾经有个链的数据类型有溢出好像-1溢出为一个比较大的值，直接偷走了许多币。技术小偷好像受到的指责是比较小的。
                    解决问题而不是传递问题。
                </span>
            </p>

            <p>23-以太坊THE DAO
                <span>
                    BTC是去中心化的货币，ETH是去中心化的合同。那么一切都去中心化呢。在这种思想的指导下，DAO出现了，叫做去中心化的自治组织，与之对应的还有DAC去中心化的团体，两者都是为了满足
                    人类对于乌托邦的尝试幻想。当年乌托邦幻想诞生共产主义，未来这种乌托邦但是的区块链会否有去中心化主义与去中心化社会呢。前者主要的非营利的后者允许有营利，
                    这东西在ETH社区引起了极大的兴奋，当时整个版面都在讨论，的确那个时候是技术的好年代，互联网上讨论技术有很多地方，很多，18年之后我明显感觉变少了，后疫情时代
                    这个矫情名称背后的那些时间微博讨论技术的也少之又少，可能是大多数人心中的理想主义之火熄灭了。致敬那个理想主义的时代，致敬那个技术奇迹发生的年代，致敬
                    开源自由时代，黄金时代白银时代青铜时代。THE DAO是根据DAO来创建的一个组织，当时被看作是改变未来的一种新模式。但是只存活了3个月，唏嘘。他的工作原理就是一个基金会，
                    一度收集了大多数的ETH，来投资一些项目取得代币或者其他收益，感觉就跟ICO一样，可能那个时候并不叫ICO，17年国内如火如荼的山寨币等等用的都是eth2.0，可能都差不多是这个原理吧。
                    投钱的话很民主，不是少数服从多数的那种民主，多数人暴政，他们也考虑了少部分人的群体，如果投资意见有分歧，可以分裂出一个子基金childDAO，又被称为splitDAO的智能合约账户把自己的
                    钱转走到子基金，其他意见差不多的也可跟着过去，但是那是16年很多经典的bug并没有一个得到认可的格式统一，就是上述的置0问题，当时的splitDAO还是在转账之后才将该数据结构
                    置0，而一个正确的做法上面说过，则再说一遍，那就是先取出数，将数据结构中的值置零，假如传输失败则将值写回去。这个模型相当于这个数仅仅只有一个就像盒子里的球拿出来就没有了，可以说是洞悉本质了。
                    故事发生了，黑客利用这个漏洞就对这个合约账户钻空子破坏系统是真的舒服，不要去创造什么而是去偷取什么，技术方式割韭菜。黑客从中盗取了价值5kw的ETH，而当时的ETH是在16年，价格还很
                    便宜，整个合约账户价值1.5e美元已经是大多数ETH了。但是THE DAO系统设置SPLITDAO需要在28天之后才能交易。这部分的钱还是锁定的。留给以太坊开发团队的时间相当的严峻，当时社区为此发生激烈的讨论。
                    1.认为做错事情应该去补救，2.认为不行，codeislaw既然代码是这么写的，区块链世界的规则与法律就是这么制订的，bug在这里就是一种feature，回滚岂不是变成了中心化的系统了。而且只是智能合约出问题，
                    并不是eth出问题，eth并不需要做出改变。总之争论很激烈，eth开发团队最终决定投票决出结果，开两个新的智能合约账户，同意与不同意的，最终同意的票数大于不同意。
                    直接进行攻击分叉出新的合法最长链肯定不行了，这样会连累到那些无辜的交易以及矿工，所以采用一种软分叉的方式，即加入一条判断所有的THE DAO账户不许交易，可惜这个软分叉
                    本身又有一个不算bug的一种bug，新增了一条判断又额外多增加了汽油费，汽油费不足的话，汽油费被扣除了但是交易汽油费不足发生错误。这样就又被黑客找到机会发动了
                    汽油费攻击，所有新更新eth系统的矿工苦不堪言，于是纷纷回滚到老版本。这样软分叉路线就失败了。解释一些为什么是软分叉，是一种不用就存在的分叉，是一种新节点排斥
                    老节点的事物，就是新节点觉得老节点没有这个判断就不合法，老节点不管新节点有没有这个判断。28天的剑悬在所有人的头上，形式非常的严峻了，ETH开发团队决定立即
                    启用硬分叉方案，软的不行就来硬的，必须去解决这个问题。硬分叉方案的做法是新增一个智能合约，被用来对所有的the DAO账户进行强制转账，不需要提供私钥签名证明合法性，
                    必须强制转入到一个退款合约里面，再根据攻击之前的账户余额进行退款，当然代币什么的可能就是没有了。这又引起社区的激烈争论，这比中心化还中心化，强制把人家的币转走巴拉巴拉，
                    哈哈有点西方无脑抗议那种味道了。这种为啥是硬分叉呢，我认为旧节点不存在这个强行转账的这种交易，新节点有，新节点认可旧节点，但是旧节点偏偏要自己特立独行。这就是硬分叉了，
                    分叉后的两条链在没有chainID之前，因为公私钥都一样，一条交易可以在另一条交易上重放，比较计数器nonce都是一样的。那么每次硬分叉岂不是原来用户的钱分两个链可以花了咯。也就是刚开始eth所有账户
                    都有等值的ETC可以花。后来加了chainID之后，智能合约应该多了字段也不同了，可能就无法通过EVM的判断验证了。说会到刚刚的分叉之后，仍然有10%的算力坚持在ETC的链上继续挖矿，
                    这里有两部分人一种是投机的觉得ETC跟ETH等值且挖矿难度降低，自己的hashRATE占大部分，能挖到很多经典以太币，另一种是信仰，这才是纯种的去中心化原教旨主义者，我认为也有傻的部分，
                    根据马哲基本原理，事物总是不断的运动变化的，固守错误不就是在抱残守缺吗。现在的etc算力比以前也增加了好几倍，但是币值却也不用多说。ETC上面那些黑客是得逞了，但是ETH上面黑客并没有得逞。
                    这里是对所有的THE DAO的账户都进行强制转账。因为虽然是黑客账户有问题，但本质是智能合约的代码出现不可修改的漏洞所以任何账户都有可能充当攻击者，必须锁住所有的账户，感觉这所谓的去中心化区块链，
                    费劲去做非常不讨好的事情。怪不得马云说央行发行的数字货币作用场景不明。
                </span>
            </p>

            <p>24-以太坊反思
                <span>哇靠这总结好多啊，醍醐灌顶。带人思考的课程就是那样的如沐春风。好的课程可能就跟王垠，肖臻，北大的coursera那些老师，mit的strang，带领人进行思考点播，提问，而不是冷冰冰的念念PPT，教师虽然是糊口，
                    但并不是糊弄学生。我虽然理解但是感觉似乎又对那些没什么记忆看来还是需要多多重复复习。不可篡改其实是双刃剑，就像全球化一样，中国正在去工业化把工业搬到印度或者一些东南亚的国家去。那里有人口红利。
                    外来务工者被监视，只能打工的那些血泪，我同情我的无产阶级兄弟。不可篡改是不靠谱的，我前面也这么说了，而且拿美国的宪法举例子，宪法都是可以用来修改的，包括废止，比如美国的宪法修正案与第18修正案，
                    （先知的建议总是被人忽视，当然提出先知建议的并没有什么身份可言，发言是看身份的，即使你有什么真知灼见，也没什么卵用，你想问集体好，领导不愿意，所以你对领导失望，继而不愿意做哪些用爱发电的事情。）
                    不要被不可窜改限制自己的思维，代码是死的人是活的，宪法都可以修改还有什么是不可修改的呢。去中心化思想聚集着那些对中心化现状不满的人群，例如创始人V神，他热爱魔兽世界，但是当暴雪删除了魔兽中他喜欢的
                    一个职业某个技能之后他多次申诉不被理睬而且无效。怒而放弃不玩。他思考本质是因为官方控制游戏内容与数据，玩家的抗议并没有选择与反对的权力，只能接受，于是踏上了开发以太坊的路途。
                    (赛博朋克人的东西被机器替代，本就是。我于政府人的三观完全不同，所以没什么好交朋友的，三观要一致，我比较的叛逆感想敢做，他们只是顺从，还会说出一大堆顺从的理由。自我欺骗又来骗他不允许你跟他不一样)
                    THE DAO在被攻击之前就有收到安全漏洞风险邮件，但是并没有办法去修改。正常的话应该是能够有修正的小补丁。区块链必须开源并不是开源更加安全，而是出于信任，那种别人丢看过都在用总应该是安全的吧，这种开源迷思。
                    solidity语言设置的反人性也是一大原因，转账是本人调用他的full_back函数进行执行的合约流程，就像我转账变成你向我要一样，不合理，这种语言看似图灵完备，但是漏洞很大。似乎都不像是一门编程语言，BTC的脚本只能执行
                    那些很简单的操作，于是又一些White list的脚本，以太坊并没有对智能合约有什么限制，而且王垠的观点认为智能合约编写的功能不能交给客户那太高了，就像要求普通人使用Linux的命令行来操作一样。实际上可能需要介于完备与简单的
                    语言，但是又没有这种。说说函数式，现在目标又被转移到函数式的编程语言作为智能合约的编程语言之上。因为1.函数式语言的语法看似不太容易理解，但是真正熟了之后写于阅读都非常流畅，
                    而且在这个领域有一个形式化验证，编译原理的东西，用来对编程文件进行静态分析提前确定错误，但是20多年前还仅仅只是一个比较简单的功能，如今又进展但是离大规模使用一些细节没办法，肖老师所在的学校Cornell跟王垠当年这取得都是同一所学校。
                    最关键的是有些程序的形式化验证出来的东西有时候执行居然会有错误。只能做一些简单的逻辑性验证。形式化编译理论很美好但是现实可就很残酷呀。
                    前面说的语言的问题也是不好解决的，因为一个编程语言在设计的时不太课程指导之后的所有应用场景。这在软件设计上容易犯提前优化的错误，你焦虑的90%都没有必要想的太多做的太少。
                    1.开源有什么好处 2.开源这么多双眼睛依然并不安全  所以安全只跟写代码本身有关  跟开源有关 但是并不绝对。去中心化比较民主，第一个是投票产生结果，第二个是即使你是少数人也有选择的权利，
                    分叉就是你的权利，这样资本财团就不会控制国家，工人阶级的矿工可以另外干，无限裂分倒是有那种老庄思想的东西，不要民族主义去恨你根本没见过的人。给项目投钱也可以退钱。不强迫投票结果。
                    去中心化并不是完全不能修改而是要按照去中心化的规则去修改。这就很关键很哲学很西湖灌顶。去中心化也不等于分布式。我之前一直把区块链理解为分布式的数据库账本，其实是错误的，他分明是一个状态机，
                    分布式为了更快更多的处理业务。状态机为了容错，去中心化一定是分布式的，但是分布式不全是去中心化，大部分都不是，分布式的节点都是有等级划分分工的，分工之后再reduce规约计算结果。差不多是线性提升算力，
                    但是去中心化要同步状态等等可能整个网络的运算速度要小于单个机器。状态机通常在航空航天股票交易关键业务领域发光，某些业务一刻不停的对关键信息进行多次重复计算且容错。去中心化如此，但是分布式系统并不是这样。
                    虽然这个可能是有些人接触到的第一个分布式系统，刚好又提了一嘴，我下一个就是要去看分布式系统|| 这个搞笑符号。智能合约并不智能应该叫做自动化合约才对，智能合约通常解决的问题是，
                    互不信任的团体要取得相互信任建立的一个共识。理想之光我本来也是觉得去中心化没用，但是理想之光，突然又觉得他的意义不在于有没有用本身，在对整个中心化世界的对立面就有他本身的意义。
                    举个不好的例子就是白等当选，在川普对面而已，当然他俩都是邪恶的，只不过川普的跟随似乎更zy。
                </span>
            </p>

            <p>25-以太坊 美链
                <span>要提取   肖老师关于去中心化应用以及一些现象的思想精髓。像鲁迅那样锐利而锋芒。与王垠的那种思想破除崇拜与一概而之，专注线下而非期待线上的技术神丹妙药。
                    话说回美链，beauti chain,这个只是一个OKEX 在2018.4的一个平台上线的ERC20的代币，在以太坊上面发行，它的漏洞与先前的置零漏洞并不一致。不然也没有必要专门提出来再说一遍，
                    先说一下代币，eth上的代币主要满足3点特性。1.没有自己的链，转账依靠运行在以太坊上的智能合约，DEFI是不是也是另一种更加先进的以太坊呢，玛德食堂的饭菜有问题啊，吃了肚子不舒服，故意下毒的吧。新来的阿姨食堂越来越不靠谱了。
                    定义发行规则，每个账户的币并不是存储在链上，而是存储在智能合约的账户状态变量上。3.按照ERC20标准来设计。最初EOS也是ETH链上的一条代币,EOS声称实现POS那种的权益DPOS，决定自己弄个主网链出来。
                    勤奋，认真，努力，像外国人那样给自己的职业做一下规划。明白自己的处境与位置。加油打工人。
                    有链就能自己挖矿，交易就能记在区块链上，但是DPOS挖矿是靠权益的，上线之后EOS就凉了。说回美链，美链的错误在于其batchTransfer函数，对多个账户进行转账，但是设计上，
                    uint64 amount=uint(cnt)*_value;这种做法的溢出，导致转账的数目是很大，但是转账的总数却是很小，相当于凭空发行了许多货币出来。OKEX立马针对这个BUG进行回滚，并且立即终止提币。等等，
                    他的影响不如当时的ETH THE DAO 那样大，但是也是一个值得注意的点。其实他的代码后面却是使用了ETH的SAFEMATH包了，但在这里的乘法并没有sub。在SAFEMATH包中，验证乘法是否溢出是这么做的，
                    A*B=C C/A==?B 这样来验算，对于这些已经发生的错误我们要吸取教训。
                </span>
            </p>

            <p>26-以太坊总结
                <span>完结撒花，就如肖老师在最早的课程里面说的那样，看完区块链课程的人都是这个领域的先行者，诶其实也不是先行者了，早在08年就有区块链了，只不过一直没有去了解，还是墙的原因。
                    当年炒币的时候已经，已经意识到最新的资讯来自tw一些V，社区，以及一些咨询新闻。但英语还是极大的限制了我，只能在国内看看什么比特币美少女，比特币女博士一流的营销骗子，币圈与链圈是要分清的。
                    有人说保险理赔应该搬上区块链，因为只是最多6个区块就理赔成功了，但是保险理赔时间长并不是支付的时间长而是流程的时间一些确认证据，区块链目前只是一个支付或者智能合同的形式，并不能全然改变线下。
                    有机农业上链，这想法当然好，但是上链的不可篡改性，不代表其数据的真实性，要是传输的是假冒数据也是不可篡改的。有些咖啡厅可以使用区块链货币也是不合理的，本身法币的支付已经非常好了，
                    区块链应该去在那些现在的交易支付系统不太完美的地方法力，比如跨境支付，比如智能合同对现实合同的一种替代。后者讲述的是一种趋势。今天看到一句话，大多数人都能跟随趋势，但是大多数人都看不清趋势，
                    而现在一个不言自明的趋势就是程序化，软件化，有句话叫做软件定义改变世界，一定程度是这样。合同也要被自动化智能化，变革的初期总是会有很多错误的出现，还是得看一定的时代背景，智能合约有成长性，但是
                    自然语言合同就不一定了。电报的存在时间非常悠久，ATM发展到现在依旧容易出错误，我们不能不允许出错。也不要一切都去中心化，还是要具体问题具体分析，去中心化真不是什么灵丹妙药，要有适合的方法，中心化
                    的项目可以加入去中心化加以点缀，去中心化不一定要求所有去中心化。要理性定义期待区块链的发展，也许现在不行，但是事务总是发展的，去中心化有很大潜力。事在人为，大家加油。！！！
                    感觉我的总结条理 逻辑还是差一些。
                </span>
            </p>

        </div>
    </body>

</html>